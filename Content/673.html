<!DOCTYPE html>
<html lang="zh-cn">
  <head>
<script type="text/javascript"> document.offlinePagesMetadata=window.offlinePagesMetadata={url:'https://fullstack.xinshengdaxue.com/posts/673'} </script>
<script type="text/javascript" src="--op-start-head.js"></script><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>4-1 Step 0 - 基础建设 - Rails 实战：购物网站 | 新生大学全栈营</title>
    

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
    <link rel="stylesheet" media="all" href="course-c5623f72c0be147234d3f8bfee75e708186d9ec550ac21d0c203a310a.css" data-turbolinks-track="reload" />
    <meta name="fp-apikey" content="A0cS9babJQsalfBCTkQl3z" />
    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="4uYr4Y9cy8A8iOHHPBa6B+duAyipO1aaS/EijJClC2mMUNruIH0qm9f/vGH17OKv7k3k7SFUrA1gKSx19itmvQ==" />
    
    <link rel="shortcut icon" href="/images/favicon.ico">
    
<!-- start Mixpanel --><script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
mixpanel.init("27446e8dd49fcd78452245388bdc58c6");</script><!-- end Mixpanel -->

<script type="text/javascript">
mixpanel.identify("555");
mixpanel.people.set({
  "$email": "524945638@qq.com",
  "$name": "jiujiubad",
  "$phone": "+8615017226170",
  "$created": "2016-12-06 22:34",
  "$last_login": "2017-10-25 15:47",
  "is_vip": "true",
  "vip_group": "vip_2st_member",
  "Real Province": "广东省",
  "Real City": "汕头市",
  "Real Area": "龙湖区",
  "Last Seen Post": "2017-10-25 16:12",
});
</script>


    <script id="IntercomSettingsScriptTag">window.intercomSettings = {"email":"524945638@qq.com","created_at":1481034885,"user_id":555,"real_name":"谢育初","phone":"+8615017226170","membership":"vip_2st_member","github":"jiujiubad","wechat":"jiujiubad","wechat_nickname":"","logdown":"http://jiujiubad-blog.logdown.com/","user_admin_url":"https://fullstack.xinshengdaxue.com/admin/users/555","real_province":"广东省","real_city":"汕头市","real_area":"龙湖区","last_seen_post":1508919157,"app_id":"akpenf00"};(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/akpenf00';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}};})()</script>


    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?1a10c974de32695b1445d93ff637492b";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    <script src="load.sumome.js" data-sumo-site-id="0bc7b08490f106c9932773cf177fbbef4929c65b2ba3ed22f5da8aa2908dd5e7" async="async"></script>

    <script type='text/javascript'>
(function (d, t) {
  var bh = d.createElement(t), s = d.getElementsByTagName(t)[0];
  bh.type = 'text/javascript';
  bh.src = 'https://www.bugherd.com/sidebarv2.js?apikey=dljgd6vivmutjpbgnko7rg';
  s.parentNode.insertBefore(bh, s);
  })(document, 'script');
</script>

    
  <script type="text/javascript" src="--op-end-head.js" defer></script>
</head>

  <body class="posts posts-show">
    <div id="qz-wrapper">
      <nav class="navbar navbar-default posts-show-navbar " id="qz-header">
  <div class="navbar-container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://fullstack.xinshengdaxue.com/dashboard">
        <span class="logo"><img src='logo.png'>全栈营</span>
      </a>
    </div>
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-left navbar-link">
    <li><a href="https://fullstack.xinshengdaxue.com/dashboard">学习中心</a></li>
    <li><a href="https://fullstack.xinshengdaxue.com/meetup_groups?from=navbar">Meetup</a></li>
      <li>
        
        <a href="https://fullstack.xinshengdaxue.com/live">直播室</a>
      </li>

  <li><a href="https://fullstack.xinshengdaxue.com/competitions">编程比赛</a></li>
      <li><a href="http://docs.qzy.camp/">帮助文档</a></li>
    <li><a href="http://forum.qzy.camp/">交流论坛</a></li>

</ul>

<ul class="nav navbar-nav navbar-right">
    <li>
  <a class="mail-icon" id="mail-icon-right" href="https://fullstack.xinshengdaxue.com/conversations">
  <i class="fa fa-envelope" aria-hidden="true"></i>
</a></li>
  <li class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
      <i class="fa fa-user-circle" aria-hidden="true"></i>&nbspjiujiubad
      <span class="caret"></span>
    </a>
   <ul class="dropdown-menu custom-dropdown-menu">
      <li><a target="_self" class="tracking" href="https://fullstack.xinshengdaxue.com/users/555">个人主页</a></li>
      <li class="divider" role="separator"></li>
      <li><a class="tracking" href="https://fullstack.xinshengdaxue.com/account/users">我的账户</a></li>
      <li><a class="tracking" href="https://fullstack.xinshengdaxue.com/account/orders">我的订单</a></li>
      <li><a class="tracking" href="https://fullstack.xinshengdaxue.com/account/favorites">我的收藏</a></li>
      <li class="divider" role="separator"></li>
      
      <li><a rel="nofollow" data-method="delete" href="https://fullstack.xinshengdaxue.com/sign_out">退出</a></li>
    </ul>
  </li>


</ul>


    </div>
  </div>
</nav>

      <div id="qz-content">
          <div class="course-menu">
  <div class="menu-content">
    <div class="left-block hidden-xs">
      <h1><a href="https://fullstack.xinshengdaxue.com/courses/31/syllabus">Rails 实战：购物网站</a></h1>
    </div>
    <div class="search-block hidden-xs hidden-sm">
      <div class="search">
  <div class="input-block">
    <form class="navbar-form" action="https://fullstack.xinshengdaxue.com/courses/31/syllabus/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
    <div class="input-group">
      <span class="input-group-btn search-btn">
        <button type="submit">
          <i class="fa fa-search"></i>
        </button>
      </span>
      <input type="text" name="q" value="" placeholder="搜索本课程教材">
    </div>
</form>  </div>
</div>

    </div>
    <div class="right-block">
      <div class="tab_menu">
        <ul class="nav nav-tabs">
          <li><a href="https://fullstack.xinshengdaxue.com/courses/31">
          <i class="fa fa-television"></i>
          概览
</a></li>          <li class="active"><a aria-current="page" href="https://fullstack.xinshengdaxue.com/courses/31/syllabus">
          <i class="fa fa-list-ul"></i>
          教材
</a></li>          <li><a href="https://fullstack.xinshengdaxue.com/courses/31/assignments">
          <i class="fa fa-file-code-o"></i>
          作业
</a></li>          <li><a href="https://fullstack.xinshengdaxue.com/courses/31/faqs">
          <i class="fa fa-comments-o"></i>
          FAQ
</a></li>          <li><a href="https://fullstack.xinshengdaxue.com/courses/31/activities">
          <i class="fa fa-tags"></i>
          动态
</a></li>        </ul>
      </div>
    </div>
  </div>
</div>


          <div class="fixed"></div>
        <div class="flash-block">
          
        </div>
        <div class="container course-block" id="show-content">
          <div class="row">
            <div class="post-visitor">
  <div class="des-text">
    <h4>所属章节：4-后台（解答）</h4>
    <p><p>本章预计学习时间: 1.5小时以内</p></p>
    <p><p>再学习3节就可以完成本章了</p></p>
  </div>
</div>
<div class="view-count">
  共 314 位第二期同学学习了本节
</div>

<div class="course-post">
  <div class="post-title-h1 markdown">
    <h1 >
      4-1 Step 0 - 基础建设
    </h1>
    <div id="favorite" class="favorite-icon-block">
        <a class="favorites-tooltip" title="" data-placement="left" data-original-title="收藏本节教材" data-remote="true" rel="nofollow" data-method="post" href="https://fullstack.xinshengdaxue.com/favorites?post_id=673">
    <span class="fa fa-bookmark-o"></span>
</a>
    </div>
  </div>

  <div class="post group">
    <div class="post-content markdown">
      <h2>Part 1 Fork 项目</h2><h3>Step 1. fork项目</h3>
<p>到 <a href="https://github.com/quanzhanying/jdstore" rel="nofollow" target="_self">https://github.com/quanzhanying/jdstore</a> 去Fork项目</p>

<ul>
<li>clone 到本地</li>
<li>复制 database.yml.example</li>
<li>git checkout -b EPIC-1</li>
<li>跑起来</li>
</ul>

<figure class="figure-code code"><div class="highlight"><pre>git clone git@github.com:XXXXX/jdstore.git
cd jdstore
cp config/database.yml.example config/database.yml
bundle check
bundle install
git checkout -b EPIC-1
rails s
</pre></div>
</figure>

<p><br></p>
<h2>Part 2 安装 Bootstrap</h2><h3>Step 1. 挂上 bootstrap-sass 这个 gem</h3>

<div>
  <a href='https://rubygems.org/gems/bootstrap-sass'>https://rubygems.org/gems/bootstrap-sass</a>
</div>

<div>
  <a href='https://github.com/twbs/bootstrap-sass'>https://github.com/twbs/bootstrap-sass</a>
</div>

<figure class="figure-code code"><figcaption><span>Gemfile
</span></figcaption><div class="highlight"><pre><span class="n">gem</span> <span class="s1">'bootstrap-sass', '~> 3.4'</span>
</pre></div>
</figure>

<p><br></p>
<h3>Step 2. 将 Bootstrap 的 CSS 组件装进项目里面</h3>
<p>在终端输入</p>

<p><code>mv app/assets/stylesheets/application.css app/assets/stylesheets/application.scss</code></p>

<p>然后修改 app/assets/stylesheets/application.scss 文件，在最后加入以下两行</p>

<figure class="figure-code code"><figcaption><span>app/assets/stylesheets/application.scss
</span></figcaption><div class="highlight"><pre><span class="cm">/*
 * ...(一堆注解)
 *= require_tree .
 *= require_self
 */</span>

<span class="o">+</span> <span class="o">@</span><span class="nt">import</span> <span class="s2">"bootstrap-sprockets"</span><span class="p">;</span>
<span class="o">+</span> <span class="o">@</span><span class="nt">import</span> <span class="s2">"bootstrap"</span><span class="p">;</span>
</pre></div>
</figure>

<p><br></p>
<h3>Step 3. 安装 jquery-rails</h3>
<div>
  <a href='https://rubygems.org/gems/jquery-rails'>https://rubygems.org/gems/jquery-rails</a>
</div>
<div>
  <a href='https://github.com/rails/jquery-rails'>https://github.com/rails/jquery-rails</a>
</div>
<figure class="figure-code code"><figcaption><span>Gemfile
</span></figcaption><div class="highlight"><pre><span class="n">gem</span> <span class="s1">'jquery-rails', '~> 4.3'</span>
</pre></div>
</figure>
<figure class="figure-code code"><figcaption><span>app/assets/javascripts/application.js
</span></figcaption><div class="highlight"><pre><span class="s1">  //= require rails-ujs<br/>+ //= require jquery<br/>+ //= require bootstrap/dropdown</span>
</pre></div>
</figure>

<p><br></p>
<h3>Step 4. bundle install</h3>
<p>执行 <code>bundle install</code></p>
<p>(注意：修改完 Gemfile 都要执行 bundle install）</p>

<p><br></p>
<h3>Step 5. 将变更 commit 进 git 里面</h3>
<figure class="figure-code code"><div class="highlight"><pre>git add .
git commit -m "Add gem bootstrap and jquery-rails"
</pre></div>
</figure>

<p><br></p>
<h2>Part 3 修改样式</h2><h3>Step 1. 新增 app/views/common 资料夹</h3>
<p><code>mkdir app/views/common</code></p>

<p><br></p>
<h3>Step 2. 新增 navbar</h3>
<a href='http://www.runoob.com/bootstrap/bootstrap-navbar.html'>http://www.runoob.com/bootstrap/bootstrap-navbar.html</a><br/>
<br/>
<p><code>touch app/views/common/_navbar.html.erb</code></p>

<p>填入</p>

<figure class="figure-code code"><figcaption><span>app/views/common/_navbar.html.erb
</span></figcaption><div class="highlight"><pre>
    &lt;nav class=&quot;navbar navbar-default&quot; role=&quot;navigation&quot;&gt;
      &lt;div class=&quot;container-fluid&quot;&gt;
        &lt;div class=&quot;navbar-header&quot;&gt;
          &lt;button type=&quot;button&quot; class=&quot;navbar-toggle&quot; data-toggle=&quot;collapse&quot;
                  data-target=&quot;#example-navbar-collapse&quot;&gt;
            &lt;span class=&quot;sr-only&quot;&gt;切换导航&lt;/span&gt;
            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
          &lt;/button&gt;
          &lt;a class=&quot;navbar-brand&quot; href=&quot;/&quot;&gt;有学&lt;/a&gt;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;form class=&quot;navbar-form navbar-left&quot; role=&quot;search&quot;&gt;
            &lt;div class=&quot;form-group&quot;&gt;
              &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Search&quot;&gt;
            &lt;/div&gt;
            &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;搜索&lt;/button&gt;
          &lt;/form&gt;
        &lt;/div&gt;
        &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;example-navbar-collapse&quot;&gt;
          &lt;ul class=&quot;nav navbar-nav&quot;&gt;
            &lt;li class=&quot;active&quot;&gt;&lt;%= link_to(&quot;学习中心&quot;, &#39;#&#39;) %&gt;&lt;/li&gt;
            &lt;li&gt;&lt;%= link_to(&quot;注册&quot;, &#39;#&#39;) %&gt;&lt;/li&gt;
            &lt;li&gt;&lt;%= link_to(&quot;登录&quot;, &#39;#&#39;) %&gt;&lt;/li&gt;
            &lt;li class=&quot;dropdown&quot;&gt;
              &lt;a href=&quot;#&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot;&gt;
                账户 &lt;b class=&quot;caret&quot;&gt;&lt;/b&gt;
              &lt;/a&gt;
              &lt;ul class=&quot;dropdown-menu&quot;&gt;
                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;jmeter&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;EJB&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Jasper Report&lt;/a&gt;&lt;/li&gt;
                &lt;li class=&quot;divider&quot;&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;分离的链接&lt;/a&gt;&lt;/li&gt;
                &lt;li class=&quot;divider&quot;&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;另一个分离的链接&lt;/a&gt;&lt;/li&gt;
              &lt;/ul&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/nav&gt;
</pre></div>
</figure>

<p><br></p>
<h3>Step 3. 新增 footer</h3>
<p><code>touch app/views/common/_footer.html.erb</code></p>

<p>填入</p>

<figure class="figure-code code"><figcaption><span>app/views/common/_footer.html.erb
</span></figcaption><div class="highlight"><pre><span class="nt">&lt;footer</span> <span class="na">class=</span><span class="s">"container"</span> <span class="na">style=</span><span class="s">"margin-top: 100px;"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"text-center"</span><span class="nt">&gt;</span>Copyright ©2019 JDStore
        <span class="nt">&lt;br&gt;</span>Design by Chu
        
    <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/footer&gt;</span>

</pre></div>
</figure>

<p><br></p>
<h3>Step 4. 修改全域 HTML 样式 application.html.erb</h3>
<figure class="figure-code code"><figcaption><span>app/views/layouts/application.html.erb
</span></figcaption><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>JDStore <span class="nt">&lt;/title&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span>

        <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span>    <span class="s1">'application'</span><span class="p">,</span> <span class="ss">media: </span><span class="s1">'all'</span><span class="p">,</span> <span class="s1">'data-turbolinks-track'</span><span class="p">:</span> <span class="s1">'reload'</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s1">'application'</span><span class="p">,</span> <span class="s1">'data-turbolinks-track'</span><span class="p">:</span> <span class="s1">'reload'</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/head&gt;</span>

    <span class="nt">&lt;body&gt;</span>

        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container-fluid"</span><span class="nt">&gt;</span>
            <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"common/navbar"</span> <span class="cp">%&gt;</span>
            <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
        <span class="nt">&lt;/div&gt;</span>

        <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"common/footer"</span> <span class="cp">%&gt;</span>

    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</pre></div>
</figure>

<p><br></p>
<h3>Step 5. 产生一个新的空 Hello World 页面 （放在 welcome#index)</h3>
<p><code>rails g controller welcome</code></p>

<ul>
<li>新增一个 welcome controller</li>
</ul>

<p><code>touch app/views/welcome/index.html.erb</code></p>

<ul>
<li>新增一个空的 HelloWorld 页面</li>
</ul>

<p>填入</p>

<figure class="figure-code code"><figcaption><span>app/views/welcome/index.html.erb
</span></figcaption><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span> Hello World! <span class="nt">&lt;/h1&gt;</span>
</pre></div>
</figure>

<p><br></p>
<h3>Step 6. 将首页指到 welcome 下的 index.html.erb 页面</h3>
<p>修改 <code>config/routes.rb</code>，改成以下内容</p>

<figure class="figure-code code"><figcaption><span>config/routes.rb
</span></figcaption><div class="highlight"><pre><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s1">'welcome#index'</span>
<span class="k">end</span>
</pre></div>
</figure>

<p><br></p>
<h3>Step 7. git 进度存档</h3>
<p><code>git add .</code><br>
<code>git commit -m "add bootstrap html"</code></p>
<h3>Step 8. 重开 Rails Server</h3>
<p><code>rails s</code></p>

<p><br></p>
<h2>Part 4 增加 flash 功能</h2><h3>Step 1. 将 Boostrap 的 js 提示组件 bootstrap/alert “挂”进项目里面</h3>
<p>在 <code>requre_tree</code> 上加入一行 <code>//= require bootstrap/alert</code></p>

<figure class="figure-code code"><figcaption><span>app/assets/javascripts/application.js
</span></figcaption><div class="highlight"><pre>... (一堆注解)
//= require jquery
//= require jquery_ujs
//= require turbolinks
<span class="gi">+//= require bootstrap/alert
</span><span class="err">//= require_tree .
</span></pre></div>
</figure>

<p><br></p>
<h3>Step 2. 新增 app/views/common/_flashes.html.erb</h3>
<p><code>touch app/views/common/_flashes.html.erb</code></p>

<p>填入</p>

<figure class="figure-code code"><figcaption><span>app/views/common/_flashes.html.erb
</span></figcaption><div class="highlight"><pre><span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">flash</span><span class="p">.</span><span class="nf">any?</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%</span> <span class="n">user_facing_flashes</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"alert alert-dismissable alert-</span><span class="cp">&lt;%=</span> <span class="n">flash_class</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"close"</span> <span class="na">data-dismiss=</span><span class="s">"alert"</span><span class="nt">&gt;</span>×<span class="nt">&lt;/button&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">value</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</pre></div>
</figure>

<p><br></p>
<h3>Step 3. 加入 app/helpers/flashes_helper.rb</h3>
<p><code>touch app/helpers/flashes_helper.rb</code></p>

<p>填入以下内容：</p>

<figure class="figure-code code"><figcaption><span>app/helpers/flashes_helper.rb
</span></figcaption><div class="highlight"><pre><span class="k">module</span> <span class="nn">FlashesHelper</span>
  <span class="no">FLASH_CLASSES</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">alert: </span><span class="s2">"danger"</span><span class="p">,</span> <span class="ss">notice: </span><span class="s2">"success"</span><span class="p">,</span> <span class="ss">warning: </span><span class="s2">"warning"</span><span class="p">}.</span><span class="nf">freeze</span>

  <span class="k">def</span> <span class="nf">flash_class</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="no">FLASH_CLASSES</span><span class="p">.</span><span class="nf">fetch</span> <span class="n">key</span><span class="p">.</span><span class="nf">to_sym</span><span class="p">,</span> <span class="n">key</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">user_facing_flashes</span>
    <span class="n">flash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">.</span><span class="nf">slice</span> <span class="s2">"alert"</span><span class="p">,</span> <span class="s2">"notice"</span><span class="p">,</span><span class="s2">"warning"</span> 
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</figure>

<p><br></p>
<h3>Step 4. 在 application.html.erb 内加入 flash 这个 partial</h3>
<p>在 <code>&lt;%= yield %&gt;</code> 前加入 <code>&lt;%= render "common/flashes" %&gt;</code></p>

<figure class="figure-code code"><figcaption><span>app/views/layouts/application.html.erb
</span></figcaption><div class="highlight"><pre>  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"common/flashes"</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
</pre></div>
</figure>

<p><br></p>
<h3>Step 5. git 存档</h3>
<figure class="figure-code code"><div class="highlight"><pre>git add .
git commit -m "add bootstrap flash"
</pre></div>
</figure>
<h3>Step 6: 测试 flash helper 的功能</h3>
<p>加入 <code>flash[:notice] = "早安！你好！"</code>。你应该可以看到系统跳出“绿色”提示窗。</p>

<figure class="figure-code code"><figcaption><span>app/controllers/welcome_controller.rb
</span></figcaption><div class="highlight"><pre><span class="k">class</span> <span class="nc">WelcomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="n">flash</span><span class="p">[</span><span class="ss">:notice</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"早安！你好！"</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</figure>

<p><br></p>
<h2>Part 5 安装 Devise</h2><h3>Step 1: 安装登录系统</h3>
<p>Devise 是一个 Rails 内热门的 gem，专门用来快速实战“登录系统”。在这一节我们会用 devise 实战登录功能。</p>

<p>Gemfile 新增一行 <code>gem 'devise'</code></p>

<figure class="figure-code code"><figcaption><span>Gemfile
</span></figcaption><div class="highlight"><pre><span class="n">gem</span> <span class="s1">'devise'</span>
</pre></div>
</figure>

<p>然后执行</p>

<figure class="figure-code code"><div class="highlight"><pre>bundle install
</pre></div>
</figure>

<p><br></p>
<h3>Step 2 : 产生会员系统的必要文件</h3>
<p>执行</p>

<figure class="figure-code code"><div class="highlight"><pre>rails g devise:install
rails g devise user
rake db:migrate
</pre></div>
</figure>

<p>重启<code>rails s</code></p>

<p><br></p>
<h3>Step 3: 修改 app/views/common/_navbar.html.erb</h3>
<figure class="figure-code code"><figcaption><span>app/views/common/_navbar.html.erb
</span></figcaption><div class="highlight"><pre><span class="gd">-                &lt;li&gt; &lt;%= link_to("登录", '#') %&gt;   &lt;/li&gt;
</span><span class="gi">+                &lt;% if !current_user %&gt;
+                  &lt;li&gt;&lt;%= link_to("注册", new_user_registration_path) %&gt; &lt;/li&gt;
+                  &lt;li&gt;&lt;%= link_to("登录", new_user_session_path) %&gt;&lt;/li&gt;
+                &lt;% else %&gt;
+                  &lt;li class="dropdown"&gt;
+                    &lt;a href="#" class="dropdown-toggle" data-toggle="dropdown"&gt;
+                        Hi!, &lt;%= current_user.email %&gt;
+                        &lt;b class="caret"&gt;&lt;/b&gt;
+                    &lt;/a&gt;
+                    &lt;ul class="dropdown-menu"&gt;
+                        &lt;li&gt; &lt;%= link_to("退出", destroy_user_session_path, method: :delete) %&gt; &lt;/li&gt;
+                    &lt;/ul&gt;
+                  &lt;/li&gt;
</span><span class="err">+                &lt;% end %&gt;
</span></pre></div>
</figure>

<p><br></p>
<h3>Step 4: 修改 app/assets/javascripts/application.js</h3>
<p>加入一行 <code>//= require bootstrap/dropdown</code></p>

<figure class="figure-code code"><figcaption><span>app/assets/javascripts/application.js
</span></figcaption><div class="highlight"><pre>//= require bootstrap/alert
<span class="err">+ //= require bootstrap/dropdown
</span></pre></div>
</figure>

<p>成果应该会是这样的效果。<br>
<figure><img src="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/xeLBMLRfQdKd3lQzhyjf_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-14%20%E4%B8%8B%E5%8D%882.07.34.png" title=""></figure></p>

<p><br></p>
<h3>Step 5: git 保存</h3>
<figure class="figure-code code"><div class="highlight"><pre>git add .
git commit -m "Add gem devise: user can signup/login/logout"
</pre></div>
</figure>

<p><br></p>
<h2>Part 6 安装 SimpleForm</h2><h3>Step 1. 使用 SimpleForm 简化</h3>
<p>首先我们要来安装 simple_form</p>

<p>打开 Gemfile，然后新增一行 <code>gem 'simple_form'</code></p>

<figure class="figure-code code"><figcaption><span>Gemfile
</span></figcaption><div class="highlight"><pre>
<span class="n">gem</span> <span class="s1">'bootstrap-sass'</span>
<span class="n">gem</span> <span class="s1">'devise'</span>
<span class="o">+</span> <span class="n">gem</span> <span class="s1">'simple_form'</span>
</pre></div>
</figure>

<p>然后执行 </p>

<figure class="figure-code code"><div class="highlight"><pre>bundle install
</pre></div>
</figure>

<p>安装 gem。</p>

<p><br></p>
<h3>Step 2. 安装 simple_form for bootstrap 的设定</h3>
<p>执行：</p>

<figure class="figure-code code"><div class="highlight"><pre>rails generate simple_form:install --bootstrap
</pre></div>
</figure>

<p><figure><img src="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/qhG8fT0yICTvwdE71igI_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202016-07-11%20%E4%B8%8B%E5%8D%885.45.42.png" title=""></figure></p>

<p>然后重开 rails server（ <code>ctrl+c</code> 然后 <code>rails s</code>）</p>

<p><br></p>
<h3>Step 3. git 存档</h3>
<figure class="figure-code code"><div class="highlight"><pre>git add .
git commit -m "Add gem simpleform with bootstrap"
</pre></div>
</figure>

<p><br></p>
<h2>Part 7 安装 font-awesome-sass</h2><h3>Step 1. 挂上font-awesome-sass</h3>
<div>
  <a href='https://github.com/FortAwesome/font-awesome-sass'>https://github.com/FortAwesome/font-awesome-sass</a>
</div>
##让旧版本 font-awesome-rails 图标生效，需在 application.thml.erb 添加 
<xmp><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"></xmp>
<figure class="figure-code code"><figcaption><span>Gemfile
</span></figcaption><div class="highlight"><pre><span class="n">gem</span> <span class="s1">'devise'</span>
<span class="n">gem</span> <span class="s1">'simple_form'</span>
<span class="o"><span class="s1"># 图标 icon <br/>gem 'font-awesome-sass', '~> 5.8'</span>
</pre></div>
</figure>

<p><br></p>
<h3>Step 2. bundle install</h3>
<p>执行 <code>bundle install</code></p>

<p>重启<code>rails s</code></p>
<h3>Step 3. 将 font-awesome装进项目里面</h3>
<figure class="figure-code code"><figcaption><span>app/assets/stylesheets/application.scss
</span></figcaption><div class="highlight"><pre><span class="s2">@import "font-awesome-sprockets"; <br/> @import "font-awesome";</span><span class="p">;</span>
</pre></div>
</figure>

<p><br></p>
<h3>Step 4. 修改 app/views/common/_navbar.html.erb</h3>
<figure class="figure-code code"><figcaption><span>app/views/common/_navbar.html.erb
</span></figcaption><div class="highlight"><pre>
    &lt;% if !current_user %&gt;
    &lt;li&gt;&lt;%= link_to(content_tag(:i, &#39; 注册&#39;, class: &#39;fas fa-user-plus&#39;), new_user_registration_path) %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%= link_to(content_tag(:i, &#39; 登录&#39;, class: &#39;fas fa-sign-in-alt&#39;), new_user_session_path) %&gt;&lt;/li&gt;
  &lt;% else %&gt;
    &lt;li class=&quot;dropdown&quot;&gt;
      &lt;a href=&quot;#&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot;&gt;
        Hi!, &lt;%= current_user.email %&gt;
        &lt;b class=&quot;caret&quot;&gt;&lt;/b&gt;
      &lt;/a&gt;
      &lt;ul class=&quot;dropdown-menu&quot;&gt;
        &lt;li&gt; &lt;%= link_to(content_tag(:i, &#39; 退出&#39;, class: &#39;fas fa-sign-out-alt&#39;), destroy_user_session_path, method: :delete) %&gt; &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
</span></pre></div>
</figure>

<p>登录、退出旁会出现新图标<br>
<figure><img src="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/SSB4lxneTfymXrHnua61_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-14%20%E4%B8%8B%E5%8D%882.37.15.png" title=""></figure></p>

<p><br></p>
<h3>Step 5. git存档</h3>
<figure class="figure-code code"><div class="highlight"><pre>git add .
git commit -m "Add gem font-awesome-sass: add login/logout/signup icon"
</pre></div>
</figure> 
<h2>效果动图</h2>
<p><figure><img src="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/hcaGc4vuSeKB52T5YdHa_jdstore-epic1.gif" title=""></figure></p>

    </div>
  </div>

  <div class="panic-panel">
  <div class="row panic-panel-title">
    <h4>对本页内容的感受如何？</h4>
    <div class="complain-btn">
      <button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#complainModal" id="want-to-complain-btn">
        📣 &nbsp我要吐槽
      </button>
    </div>
  </div>

  <!-- new feeling's UI -->

  <div class="panic-panel-body" id="selectable" data-post-id="673">
    <div class="item " value="good" >
      <div class="ui-widget-content"><span class="emoji">😄</span><span class="text">So easy</span></div>
    </div>
    <div class="item " value="normal" >
      <div class="ui-widget-content"><span class="emoji">😐</span><span class="text">还OK</span></div>
    </div>
    <div class="item " value="bad" >
      <div class="ui-widget-content"><span class="emoji">😭</span><span class="text">崩溃了</span></div>
    </div>
  </div>

  <div class="row">
    <span id="status-area" class="feeling-submit-tips"></span>
  </div>

</div>



<!-- 吐槽Modal -->
<div class="modal fade modal-draggable message-modal-style" id="complainModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" >
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="complainModalLabel">您对本篇教程有什么想说的？</h4>
      </div>
      <form class="simple_form new_complain" id="new_complain" enctype="multipart/form-data" action="https://fullstack.xinshengdaxue.com/complains" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />
        <div class="modal-body">
          <div class="input-block">
            <div class="form-group hidden complain_post_id"><input class="form-control hidden" value="673" type="hidden" name="complain[post_id]" id="complain_post_id" /></div>
            <div class="form-group text optional complain_content"><label class="control-label text optional" for="complain_content">槽点/反馈(如果遇到课程技术问题，请直接到Slack向助教提问)</label><textarea class="form-control text optional" name="complain[content]" id="complain_content">
</textarea></div>
            <div class="file-upload-block complain-img">
              <div class="form-group file optional complain_image"><label class="control-label file optional" for="complain_image">上传截图(可选)</label><input class="file optional" type="file" name="complain[image]" id="complain_image" /></div>
            </div>
            <div class="message-modal-footer">
              <div class="row">
                <span id="complain-submit-status-srea" class="pull-left"></span>
              </div>
              <a href="#" data-dismiss="modal">取消</a>
              <input type="submit" name="commit" value="吐槽" class="btn btn-primary" id="complain-submit-btn" disabled="disabled" data-disable-with="吐槽" />
            </div>
          </div>
        </div>
</form>    </div>
  </div>
</div>


    <div class="group post-nav-btn">
      
<ul class="pager-custom">
  <li class="previous"> <a id="previous" href="https://fullstack.xinshengdaxue.com/posts/672"><i class="fa fa-arrow-left"></i><span> 上一页</span></a></li>
  <li class="keyboard-tips"><i class="fa fa-lightbulb-o" aria-hidden="true"></i>可以使用<kbd>←</kbd><kbd>→</kbd>键进行翻页</li>
  <li class="next"><a href="https://fullstack.xinshengdaxue.com/posts/674">下一页<span class="fa fa-arrow-right" id="next"></span></a> </li>
</ul>

    </div>




</div>




          </div>
        </div>
        <div id="backtotop">
          <a href="#" class="btn-backtotop">
            <span class="up-arrow">
              <i class="fa fa-arrow-up" aria-hidden="true"></i>
            </span>
          </a>
        </div>
      </div>
      <script src="course-a1f935bd63e40b416534022dac704214bc17b62c1dea6da648e918e8c.js"></script>
      <footer class="posts-show-footer" id="qz-footer">
    <div class="footer-section">
        <div class="footer-content">
            <div class="contact-line-block">
                <div class="right-block">
                    <div class="line">
                        <div class="icon">
                            <i class="fa fa-comments-o fa-fw" aria-hidden="true"></i>
                        </div>
                        <div class="link">
                            <a href="#" onclick="Intercom('show');">在线客服<br class="mobile-view">
                                <span class="xs-mobile">(非技术答疑，工作日10:00-19:00)</span>
                            </a>
                        </div>
                    </div>
                    <div class="introduce">
                        <div class="img-block">
                            <img src='logo.png'>
                        </div>
                        <div class="introduce-block">
                            <p>
                                新生大学线上全栈营由两岸知名的 Rails 教练郑伊廷、天使投资人李笑来共同主持。
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="des-block">
              <div class="column-block">
                <div class="column-left">
                    <ul class="list-unstyled">
                        <li class='column-title'>全栈营</li>
                        <li><a href="https://fullstack.xinshengdaxue.com/pages/course_intro">课程介绍</a></li>
                        <li><a href="https://fullstack.xinshengdaxue.com/pages/teachers">教学团队</a></li>
                        <li><a href="https://fullstack.xinshengdaxue.com/pages/students">学员心得</a></li>
                    </ul>
                </div>
                <div class="column-center">
                    <ul class="list-unstyled">
                        <li class='column-title'>课程资源</li>
                        <li><a href="https://fullstack.xinshengdaxue.com/dashboard">学习中心</a></li>
                        <li><a href="http://docs.qzy.camp/">帮助文档</a></li>
                        <li><a href="http://forum.qzy.camp/">交流论坛</a></li>
                    </ul>
                </div>
                <div class="column-right">
                    <ul class="list-unstyled">
                        <li class='column-title'>关于我们</li>
                        <li><a href="https://fullstack.xinshengdaxue.com/pages/about">公司介绍</a></li>
                        <li><a href="https://fullstack.xinshengdaxue.com/pages/faq">常见问题</a></li>
                        <li><a href="https://fullstack.xinshengdaxue.com/pages/contact">联系方式</a></li>
                    </ul>
                </div>
            </div>
          </div>

            <div class="fline"></div>
            <div class="copyright-block">
                <div class="copyright-content">
                    <div class="copyright-info">
                        <p>
                            © 2017 北京全栈思维教育科技有限公司
                        </p>
                    </div>
                    <div class="legal-info">
                      <p>
                          本站聘请孙雁飞律师为法律顾问
                      </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

      <div id="modal-from-dom" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-from-dom-label" aria-hidden="true">

</div>

    </div>

    <script src="cyberplayer-baca247386108140f146be31acc721b4cadef259ad2d63f5fc51.js"></script>
    
      <script type="text/javascript">
mixpanel.track_links('.course-post .next a', 'Clicked next post btn');
mixpanel.track_links('.course-post .previous a', 'Clicked previous post btn');
mixpanel.track_links('#backtotop .btn-backtotop', 'Clicked back to top btn');
</script>
<script type="text/javascript">
mixpanel.track_links('.navbar-container .custom-dropdown-menu a.tracking', "Clicked user dropdown menu link", function(element) {
  return { text: $(element).html().replace(/(<([^>]+)>)/ig, "").trim() }
});
</script>
<script type="text/javascript">
mixpanel.track_links(".navbar-container .navbar-link a", "Clicked top nav link", function(element) {
  return { text: $(element).html().replace(/(<([^>]+)>)/ig, "").trim() }
});
</script>
<script type="text/javascript">
mixpanel.track_links(".course-menu .nav-tabs a", "Clicked post nav link", function(element) {
  return { text: $(element).html().replace(/(<([^>]+)>)/ig, "").trim() }
});
</script>

    <script type="text/javascript">
    mixpanel.track("4-1 Step 0 - 基础建设 - Rails 实战：购物网站 | 新生大学全栈营")
    </script>

      <script type="text/javascript">
var metadata = {
  post_id: '673',
  post_title: '4-1 Step 0 - 基础建设',
  post_url: 'https://fullstack.xinshengdaxue.com/posts/673'
};
Intercom('trackEvent', 'watched_post', metadata);
</script>


  </body>
</html>
